{% extends "base.html" %}

{% block additional_css %}
<link rel="stylesheet" href="{{ url_for('pdf.static', filename='pdf_grader/css/report_status.css') }}">
{% endblock %}       

{% block navigation %}
<nav class="fixed-top navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item"><a class="nav-link" href="{{ url_for(request.blueprint + '.index') }}">課題一覧</a></li>
            </ul>
        </div>
    </div>
</nav>
{% endblock %}

{% block title %}提出状況{% endblock %}

{% block content %}
<h1>提出状況</h1>
<table class="status-table">
    <tr class="bg-header">
        {% for col in columns %} <th>{{ col }}</th> {% endfor %}
    </tr>
    {% for row in enrolled %}
    <tr>
        {% for col in columns %}
            {% set val = row[col] %}
            <td class="{% if val == '◎' %}bg-perfect{% elif val == '詳' %}bg-detail{% elif val == '答' %}bg-answer{% elif val == '×' %}bg-none{% endif %}">
                {{ val }}
            </td>
        {% endfor %}
    </tr>
    {% endfor %}
</table>

{% if unlisted %}
<h2 style="color: red;">⚠️ 名簿外の学生</h2>
<table class="status-table">
    <tr class="bg-header">
        {% for col in columns %} <th>{{ col }}</th> {% endfor %}
    </tr>
    {% for row in unlisted %}
    <tr>
        {% for col in columns %}
            {% set val = row[col] %}
            <td class="{% if val == '◎' %}bg-perfect{% elif val == '詳' %}bg-detail{% elif val == '答' %}bg-answer{% elif val == '×' %}bg-none{% endif %}">
                {{ val }}
            </td>
        {% endfor %}
    </tr>
    {% endfor %}
</table>
{% endif %}
{% endblock %}

